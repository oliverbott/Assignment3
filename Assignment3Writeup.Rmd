---
title: 'Open vs. closed innovation: using online network data to measure innovation'
author: "Benjamin Snow and Oliver Bott"
date: "14 November 2014"
output:
  pdf_document:
    fig_caption: yes
    number_sections: yes
  html_document:
    fig_caption: yes
    number_sections: no
bibliography:
- Packages.bib
- Main.bib
---

```{r echo=FALSE, warning=FALSE, error=FALSE, message=FALSE}
# Set working directory. Change as needed
setwd('C:/Users/a6p/Desktop/Uni 2014/E1161 - Collaborative Research/GitHub Clone/Assignment3/Assignment3/')

# Load packages and create BibTeX file
# Note: must have repmis, rsdmx, httr, dplyr and rjson packages installed
PackagesUsed <- c("ggplot2", "repmis", "rsdmx", "httr", "dplyr", "rjson", "stargazer", "knitr")

# Load PackagesUsed and create .bib BibTeX file
repmis::LoadandCite(PackagesUsed, file = "Packages.bib", install = FALSE)
```

# Background

This research project examines the potential preferability of using collaborative online network data on the city-level as an innovation indicator. By doing so, this work critically assesses current innovation indicators in the hope of offering new alternatives for measuring and understanding innovation. Since various scholars, called for the continuous improvement of innovation measurement [see for example @freeman2009], this work seeks to go beyond the widespread use of patent data to contribute to the refinement of innovation indicators, and the field as a whole.

For context, the stated research question is:  *To what extent can open innovation network data add to the measurement of innovation performance?*

For the full examination of the previous literature on the subject and reasoning for the purpose and motives and plan for this study, please see ___.  This contribution focuses specifically on outlining the data gathering, data cleaning, and data merging process. It will also contain an explanation for the construction of early descriptive and inferential statistical models.

# Data Gathering

To examine open network data against patent data, this study will relies on two data sets and uses the statistical tool R [@CiteR] for the data analysis. 

The first data set was obtained by using the Application Programming Interface (API) data for open networks. To examine open data innovation, data is obtained from the the git repository web-based hosting service GitHub[^GIT]. The R [@CiteR] packages @R-httr, @R-dplyr and @R-rjson allow for compiling data on the user counts and locations associated with different repositories.  For closed innovation we use city-level patent data, taken from the Organization for Economic Co-operation and Development[^OECD]. The R [@CiteR] package [@R-rsdmx] is necessary for obtaining the OECD dataset. Patent Cooperation Treaty (PCT) patent data are used to track internationally patented inventions. Patent data and and GitHub follower data was taken for _ cities, which were matched for direct comparison.  


 As we are interested in patent data, we work with data indicating the PCT patent applications per 10,000 inhabitants. From the same database, we also use GDP per capita data and environmental data, as other variables which could prove significant in explaining differences in innovation. The OECD data will be in a format that allows us to locate patent activity to individual cities. 



lines (230-345 of other document)



For closed innovation we use city-level patent data, taken from the Organization for Economic Co-operation and Development[^OECD]. The R [@CiteR] package [@R-rsdmx] is necessary for obtaining the OECD dataset. Patent Cooperation Treaty (PCT) patent data are used to track internationally patented inventions. For our sample, we took patent data of 133 cities from various OECD countries. As we are interested in patent data, we work with data indicating the PCT patent applications per 10,000 inhabitants. From the same database, we also use data on GDP per capita, pollution levels as a proxy for industrial development, greenspace as a proxy for the recreational value, employment data (as share of national employment) as a proxy for the relative national importance of the city. These other variables are inclued in the analysis as they could prove significant in explaining differences in innovation.


# Justification

A large aspect of data gathering and analysis is determining and clearly explaining reasoning behind the independent variables chosen in constructing a model.  For the purpose of this study, elements chosen to include in the model focused on the general economic health of the cities chosen (GDP), the industrialization level of the city (Pollution), the amount of publically usable parkland (Greenspace), 

**Cities**



Why are we using the cities we are, why did we exclude Einhoven etc.

**Pollution**

Pollution data was obtained as a broad proxy for industrialization

**GDP**

Greenspace, employment as share of national employment, pop, 

```{r, include=FALSE}
# Load Dataset.csv from repository
library(RCurl)

# Set SSL certs globally
options(RCurlOptions = list(cainfo = system.file("CurlSSL", "cacert.pem", package = "RCurl")))

x <- getURL('https://raw.githubusercontent.com/oliverbott/Assignment3/master/Dataset.csv')
dataset <- read.csv(text = x)

# Clean dataset
dataset$X <- NULL

# Turn follower numbers to per 10.000 from 500.000
dataset$nofollowing <- dataset$nofollowing/50
dataset$medfollowing <- dataset$medfollowing/50
dataset$hifollowing <- dataset$hifollowing/50

# To do log of nofollowing delete Kofu and Numazu, rows 62 and 90
dataset[-c(62, 90), ]
dataset <- dataset[-c(62, 90), ]

# Further, to do log of medfollowing and hifollowing also delete these rows without followers
dataset[-c(39, 45, 46, 59, 62, 73, 80, 114, 118, 119), ]
dataset <- dataset[-c(39, 45, 46, 59, 62, 73, 80, 114, 118, 119), ]

```


Due to the exploratory nature of the study, it is important to be aware of the limitation before examining results, to put them in their proper context, and to keep in mind possible more approximate ways in the future.

# Limitations

For this analysis, there have been several issues with identifying parts of cities (Regions of cities).  Additionally, pulling API data for cities with two word names 'New York', '

The constraints of the data used in this study are numerous, but fall largely within three main categories:

Time:

Too Rough a Proxy:

**Defining Innovation**

**Measuring Innovation**

**Limitations of Patent Data**


```{r, echo=FALSE, results='asis'}
library(knitr)

# Create table with info on variables
Variables <- c('Patents', 'GDP', 'Population', 'Greenspace', 'Employment', 'Pollution', 'No Following', '1-24 Following', '>25 Following')
Year <- c('2008', '2008','2008','2008','2008','2005', '2014', '2014', '2014')
Source <- c('OECD', 'OECD', 'OECD', 'OECD', 'OECD', 'OECD', 'API', 'API','API')

# Combine
limtab <- data.frame(Variables, Year, Source)

knitr::kable(limtab)
```



# Methodology

To examine open network data against patent data, this study will rely largely on two data sets and use the statistical tool R [@CiteR] for the data analysis.

**API network data**

The first data set is obtained by using the Application Programming Interface (API) data for open networks. To examine open data innovation, data is obtained from the the git repository web-based hosting service GitHub[^GIT]. GitHub is a web-based hosting service used for collaborative research. Its use of source code management makes it a commonly used software development collaboration tool. Since most of the repositories are openly accessible one can use API tools to track the popularity of repositories, measured here by the repository user counts. The R [@CiteR] packages @R-httr, @R-dplyr and @R-rjson allow us to compile data on the user counts and locations associated with different repositories.

For the analysis, first create location vectors for different cities with the `locations` code. Since many GitHub users can be located, we will identify different open innovation clusters, for example Berlin, New York and San Francisco. In addition, we use the `vector()` code to get information on user counts, focusing on repositories with more than 20 or so followers. By combining locations and user counts data by using `data.frame()`, we will be able to construct data sets for different location clusters and user count numbers, where users of highly relevant repositories are located.

**Closed innovation OECD patent data**

For closed innovation we use city-level patent data, taken from the Organization for Economic Co-operation and Development[^OECD]. The R [@CiteR] package [@R-rsdmx] is necessary for obtaining the OECD dataset. Patent Cooperation Treaty (PCT) patent data are used to track internationally patented inventions. For our preliminary sample, we took patent data of 20 cities overall, ranging from six different countries, including their country level patent data, for general comparison over the time period 2000 until 2012. As we are interested in patent data, we work with data indicating the PCT patent applications per 10,000 inhabitants. From the same database, we also use GDP per capita data and environmental data, as other variables which could prove significant in explaining differences in innovation. The OECD data will be in a format that allows us to locate patent activity to individual cities. 


**Statistical Model**

On the type of analysis and question, this study plans to use an ordinary least squares (OLS) model by using `plot` and possibly `rcorr( , type="pearson")` to examine the relationship between patent and open data in a given network cluster. If we happen to find a relationship, this would presumably demonstrate that open data shows the same innovation as patent data, but the 'throughput' of innovation rather than the 'output'. Open data having a relationship to patent data would presumably show innovation as a throughput, since it is measured by people finding those contributing in open data as innovators (followers on github), rather than looking at the specific innovation at completion (patents). One limitation we are facing is that the patent data will not be up to date compared to the network data. Still we believe that a general comparison is possible and could lead to valid results.


```{r, echo=FALSE, results='asis'}

# Descriptive statistics

# summary(dataset[,2:10])
# knitr::kable(summary(dataset[,2:10])


# hist(dataset$Patents,
#      main = 'PCT applications',
#      xlab = 'PCT patent applications per 10,000 inhabitants')

# hist(dataset$nofollowing,
#      main = 'PCT applications',
#      xlab = 'PCT patent applications per 10,000 inhabitants')

```


```{r, echo=FALSE, results='asis'}
require("car")

#plot(dataset$Patents,dataset$Followers)
#plot(dataset[,3,7])


car::scatterplotMatrix(dataset[,2:10])
```




# Data

How our model is built up.

```{r, echo=FALSE, results='asis'}

# Create patent models for stargazer regression output
library(stargazer)

P1 <- lm(log(Patents) ~ log(nofollowing), data = dataset)
P2 <- lm(log(Patents) ~ log(medfollowing), data = dataset)
P3 <- lm(log(Patents) ~ log(hifollowing), data = dataset)
P4 <- lm(log(Patents) ~ log(hifollowing) + log(GDP) + log(Population) + log(Greenspace) + log(Employment) + log(Pollution), data = dataset)

labelsP <- c('(Intercept)', 'No Following', '1-24 Following', '>25 Following', 'GDP', 'Population', 'Greenspace', 'Employment', 'Pollution')

stargazer::stargazer(P1, P2, P3, P4, covariate.labels = labelsP,
  title = 'Regression Estimates of Patent Activity',
  digits = 2, type ='latex', header=FALSE)
```


Some interpretation

```{r, echo=FALSE, results='asis'}

# Create follower model for stargazer regression output

F1 <- lm(log(hifollowing) ~ log(Patents), data = dataset)
F2 <- lm(log(hifollowing) ~ log(Patents) + log(GDP) + log(Population) + log(Greenspace) + log(Employment) + log(Pollution), data = dataset)

labelsF <- c('(Intercept)', 'Patents', 'GDP', 'Population', 'Greenspace', 'Employment', 'Pollution')

stargazer::stargazer(F1, F2, covariate.labels = labelsF,
  title = 'Regression Estimates of Follower Numbers',
  digits = 2, type ='latex', header=FALSE)
```


Some interpretation.


[^OECD]: Online accessible on http://stats.oecd.org.
[^GIT]: Online accessilbe on https://github.com/.

# References




