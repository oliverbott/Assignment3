---
title: "OECD city data"
author: "Oliver Bott"
date: "Saturday, November 01, 2014"
output: html_document
---


```{r include=FALSE}
# Set working directory. Change as needed
setwd('C:/Users/a6p/Desktop/Uni 2014/E1161 - Collaborative Research/GitHub Clone/Assignment3/')
```

# Methodology

We obtain the patent data on the city level from the OECD database. The R [@CiteR] package [@RSDMX] necessary for obtaining the OECD dataset.

```{r include=FALSE}
# Install packages to pull OECD data

# install.packages("devtools")
require("devtools")
library("rsdmx")
```

In the next step we pull the OECD data from the online database using [@RSDMX]. As we are interested in patent data, we work with data indicating the PCT patent applications per 10,000 inhabitants. We are also interested in the population numbers and GDP.

```{r include=FALSE}
# Pull OECD city patent data
dataURL <- "http://stats.oecd.org/restsdmx/sdmx.ashx/GetData/CITIES/AT001+AT002+AT003+BE001+BE002+BE003+BE005+CAN01+CAN04+CAN06+CAN09+CAN16+CAN20+CAN21+CAN26+CAN29+CH001+CH002+CH003+CL010+CL011+CL020+CZ001+CZ002+CZ003+DE001+DE002+DE003+DE004+DE005+DE006+DE007+DE008+DE009+DE010+DE011+DE012+DE013+DE014+DE015+DE027+DE033+DE034+DE035+DE040+DE501+DE502+DE504+DE507+DK001+EE001+ES001+ES002+ES003+ES004+ES005+ES006+ES008+ES019+FI001+FR001+FR003+FR004+FR006+FR007+FR008+FR009+FR010+FR011+FR013+FR026+FR032+FR203+FR205+FR215+GR001+GR002+HU001+IE001+IT001+IT002+IT003+IT004+IT005+IT006+IT007+IT008+IT009+IT010+IT011+JP003+JP013+JP015+JP020+JP021+JP023+JP024+JP025+JP026+JP030+JP031+JP034+JP036+JP038+JP039+JP040+JP042+JP046+JP047+JP048+JP050+JP051+JP052+JP053+JP054+JP055+JP059+JP064+JP065+JP066+JP067+JP071+JP074+JP075+JP077+JP078+KR004+KR015+KR018+KR022+KR025+KR026+KR029+KR032+KR033+KR035+MEX01+MEX02+MEX05+MEX08+MEX10+MEX16+MEX19+MEX20+MEX21+MEX22+MEX24+MEX28+MEX29+MEX31+MEX33+MEX34+MEX35+MEX37+MEX38+MEX40+MEX42+MEX46+MEX50+MEX51+MEX52+MEX55+MEX59+MEX60+MEX61+MEX70+MEX73+MEX74+MEX75+NL001+NL002+NL003+NL004+NL005+NO001+PL001+PL002+PL003+PL004+PL005+PL006+PL009+PL010+PT001+PT002+SE001+SE002+SE003+SI001+SK001+UK001+UK002+UK003+UK004+UK005+UK006+UK007+UK008+UK009+UK010+UK011+UK017+UK023+UK097+UK098+US003+US012+US014+US033+US035+US038+US039+US044+US045+US048+US055+US060+US065+US069+US070+US077+US081+US084+US089+US097+US103+US106+US107+US114+US115+US117+US122+US124+US125+US128+US133+US134+US135+US141+US146+US147+US149+US154+US155+US159+US160+US161+US170+US174+US178+US180+US181+US186+US190+US195+US196+US202+US205+US209+US210+US212+US213+US223+US227+US233+US234+US237+US241+US242+US245+US250+US251+US252+US259+US261.PCT_INTENSITY?startTime=2008&endTime=2012"

sdmx <- readSDMX(dataURL)
city_pat <- as.data.frame(sdmx)

# Clean table by deleting and renaming rows
city_pat$VAR <- NULL # Delete columns
city_pat$attrs.df <- NULL

colnames(city_pat) <- c("METRO_ID" , "Year" , "Patent_Intensity") # Rename columns

# Pull OECD GDP per capita data

dataURL2 <- "http://stats.oecd.org/restsdmx/sdmx.ashx/GetData/CITIES/AT001+AT002+AT003+BE001+BE002+BE003+BE005+CAN01+CAN04+CAN06+CAN09+CAN16+CAN20+CAN21+CAN26+CAN29+CH001+CH002+CH003+CL010+CL011+CL020+CZ001+CZ002+CZ003+DE001+DE002+DE003+DE004+DE005+DE006+DE007+DE008+DE009+DE010+DE011+DE012+DE013+DE014+DE015+DE027+DE033+DE034+DE035+DE040+DE501+DE502+DE504+DE507+DK001+EE001+ES001+ES002+ES003+ES004+ES005+ES006+ES008+ES019+FI001+FR001+FR003+FR004+FR006+FR007+FR008+FR009+FR010+FR011+FR013+FR026+FR032+FR203+FR205+FR215+GR001+GR002+HU001+IE001+IT001+IT002+IT003+IT004+IT005+IT006+IT007+IT008+IT009+IT010+IT011+JP003+JP013+JP015+JP020+JP021+JP023+JP024+JP025+JP026+JP030+JP031+JP034+JP036+JP038+JP039+JP040+JP042+JP046+JP047+JP048+JP050+JP051+JP052+JP053+JP054+JP055+JP059+JP064+JP065+JP066+JP067+JP071+JP074+JP075+JP077+JP078+KR004+KR015+KR018+KR022+KR025+KR026+KR029+KR032+KR033+KR035+MEX01+MEX02+MEX05+MEX08+MEX10+MEX16+MEX19+MEX20+MEX21+MEX22+MEX24+MEX28+MEX29+MEX31+MEX33+MEX34+MEX35+MEX37+MEX38+MEX40+MEX42+MEX46+MEX50+MEX51+MEX52+MEX55+MEX59+MEX60+MEX61+MEX70+MEX73+MEX74+MEX75+NL001+NL002+NL003+NL004+NL005+NO001+PL001+PL002+PL003+PL004+PL005+PL006+PL009+PL010+PT001+PT002+SE001+SE002+SE003+SI001+SK001+UK001+UK002+UK003+UK004+UK005+UK006+UK007+UK008+UK009+UK010+UK011+UK017+UK023+UK097+UK098+US003+US012+US014+US033+US035+US038+US039+US044+US045+US048+US055+US060+US065+US069+US070+US077+US081+US084+US089+US097+US103+US106+US107+US114+US115+US117+US122+US124+US125+US128+US133+US134+US135+US141+US146+US147+US149+US154+US155+US159+US160+US161+US170+US174+US178+US180+US181+US186+US190+US195+US196+US202+US205+US209+US210+US212+US213+US223+US227+US233+US234+US237+US241+US242+US245+US250+US251+US252+US259+US261.GDP_PC?startTime=2008&endTime=2008"

sdmx <- readSDMX(dataURL2)
city_gdp <- as.data.frame(sdmx)

# Clean table by deleting and renaming rows
city_gdp$VAR <- NULL # Delete columns
city_gdp$attrs.df <- NULL

colnames(city_gdp) <- c("METRO_ID" , "Year" , "GDP") # Rename columns

# Pull OECD population data

dataURL3 <- "http://stats.oecd.org/restsdmx/sdmx.ashx/GetData/CITIES/AT001+AT002+AT003+BE001+BE002+BE003+BE005+CAN01+CAN04+CAN06+CAN09+CAN16+CAN20+CAN21+CAN26+CAN29+CH001+CH002+CH003+CL010+CL011+CL020+CZ001+CZ002+CZ003+DE001+DE002+DE003+DE004+DE005+DE006+DE007+DE008+DE009+DE010+DE011+DE012+DE013+DE014+DE015+DE027+DE033+DE034+DE035+DE040+DE501+DE502+DE504+DE507+DK001+EE001+ES001+ES002+ES003+ES004+ES005+ES006+ES008+ES019+FI001+FR001+FR003+FR004+FR006+FR007+FR008+FR009+FR010+FR011+FR013+FR026+FR032+FR203+FR205+FR215+GR001+GR002+HU001+IE001+IT001+IT002+IT003+IT004+IT005+IT006+IT007+IT008+IT009+IT010+IT011+JP003+JP013+JP015+JP020+JP021+JP023+JP024+JP025+JP026+JP030+JP031+JP034+JP036+JP038+JP039+JP040+JP042+JP046+JP047+JP048+JP050+JP051+JP052+JP053+JP054+JP055+JP059+JP064+JP065+JP066+JP067+JP071+JP074+JP075+JP077+JP078+KR004+KR015+KR018+KR022+KR025+KR026+KR029+KR032+KR033+KR035+MEX01+MEX02+MEX05+MEX08+MEX10+MEX16+MEX19+MEX20+MEX21+MEX22+MEX24+MEX28+MEX29+MEX31+MEX33+MEX34+MEX35+MEX37+MEX38+MEX40+MEX42+MEX46+MEX50+MEX51+MEX52+MEX55+MEX59+MEX60+MEX61+MEX70+MEX73+MEX74+MEX75+NL001+NL002+NL003+NL004+NL005+NO001+PL001+PL002+PL003+PL004+PL005+PL006+PL009+PL010+PT001+PT002+SE001+SE002+SE003+SI001+SK001+UK001+UK002+UK003+UK004+UK005+UK006+UK007+UK008+UK009+UK010+UK011+UK017+UK023+UK097+UK098+US003+US012+US014+US033+US035+US038+US039+US044+US045+US048+US055+US060+US065+US069+US070+US077+US081+US084+US089+US097+US103+US106+US107+US114+US115+US117+US122+US124+US125+US128+US133+US134+US135+US141+US146+US147+US149+US154+US155+US159+US160+US161+US170+US174+US178+US180+US181+US186+US190+US195+US196+US202+US205+US209+US210+US212+US213+US223+US227+US233+US234+US237+US241+US242+US245+US250+US251+US252+US259+US261.POP?startTime=2008&endTime=2008"

sdmx <- readSDMX(dataURL3)
city_pop <- as.data.frame(sdmx)

# Clean table by deleting and renaming rows
city_pop$VAR <- NULL # Delete columns
city_pop$attrs.df <- NULL

colnames(city_pop) <- c("METRO_ID" , "Year" , "Population") # Rename columns


# Pull OECD population density data

dataURL4 <- "http://stats.oecd.org/restsdmx/sdmx.ashx/GetData/CITIES/AT001+AT002+AT003+BE001+BE002+BE003+BE005+CAN01+CAN04+CAN06+CAN09+CAN16+CAN20+CAN21+CAN26+CAN29+CH001+CH002+CH003+CL010+CL011+CL020+CZ001+CZ002+CZ003+DE001+DE002+DE003+DE004+DE005+DE006+DE007+DE008+DE009+DE010+DE011+DE012+DE013+DE014+DE015+DE027+DE033+DE034+DE035+DE040+DE501+DE502+DE504+DE507+DK001+EE001+ES001+ES002+ES003+ES004+ES005+ES006+ES008+ES019+FI001+FR001+FR003+FR004+FR006+FR007+FR008+FR009+FR010+FR011+FR013+FR026+FR032+FR203+FR205+FR215+GR001+GR002+HU001+IE001+IT001+IT002+IT003+IT004+IT005+IT006+IT007+IT008+IT009+IT010+IT011+JP003+JP013+JP015+JP020+JP021+JP023+JP024+JP025+JP026+JP030+JP031+JP034+JP036+JP038+JP039+JP040+JP042+JP046+JP047+JP048+JP050+JP051+JP052+JP053+JP054+JP055+JP059+JP064+JP065+JP066+JP067+JP071+JP074+JP075+JP077+JP078+KR004+KR015+KR018+KR022+KR025+KR026+KR029+KR032+KR033+KR035+MEX01+MEX02+MEX05+MEX08+MEX10+MEX16+MEX19+MEX20+MEX21+MEX22+MEX24+MEX28+MEX29+MEX31+MEX33+MEX34+MEX35+MEX37+MEX38+MEX40+MEX42+MEX46+MEX50+MEX51+MEX52+MEX55+MEX59+MEX60+MEX61+MEX70+MEX73+MEX74+MEX75+NL001+NL002+NL003+NL004+NL005+NO001+PL001+PL002+PL003+PL004+PL005+PL006+PL009+PL010+PT001+PT002+SE001+SE002+SE003+SI001+SK001+UK001+UK002+UK003+UK004+UK005+UK006+UK007+UK008+UK009+UK010+UK011+UK017+UK023+UK097+UK098+US003+US012+US014+US033+US035+US038+US039+US044+US045+US048+US055+US060+US065+US069+US070+US077+US081+US084+US089+US097+US103+US106+US107+US114+US115+US117+US122+US124+US125+US128+US133+US134+US135+US141+US146+US147+US149+US154+US155+US159+US160+US161+US170+US174+US178+US180+US181+US186+US190+US195+US196+US202+US205+US209+US210+US212+US213+US223+US227+US233+US234+US237+US241+US242+US245+US250+US251+US252+US259+US261.POP_DENS?startTime=2008&endTime=2008"

sdmx <- readSDMX(dataURL3)
city_popd <- as.data.frame(sdmx)

# Clean table by deleting and renaming rows
city_popd$VAR <- NULL # Delete columns
city_popd$attrs.df <- NULL

colnames(city_popd) <- c("METRO_ID" , "Year" , "Density") # Rename columns

```

After cleaning the data frames and sorting the data, we merge the three data sets into one using the following code: 


```{r echo=TRUE}
# Merge all 3 OECD citydata sets

oecd_pat_gdp <- merge(city_pat , city_gdp , by=c("METRO_ID" , "Year"))
oecd_pat_gdp_pop <- merge(oecd_pat_gdp , city_pop , by=c("METRO_ID" , "Year"))
oecd <- merge(oecd_pat_gdp_pop , city_popd , by=c("METRO_ID" , "Year"))
```

```{r include=FALSE}
# Turn Year into numeric - WE MIGHT NOT NEED THIS - ALL ARE 2008
# sapply(oecd, mode)
# transform(oecd, Year = as.numeric(Year))
```

To further clean up the table we rename the METRO IDs and allocate the real city names.

```{r echo=FALSE}

# Clean city table, insert city and country names

oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "AT001" , "Vienna")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "AT002" , "Graz")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "AT003" , "Linz")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "BE001" , "Brussels")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "BE002" , "Antwerp")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "BE003" , "Ghent")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "BE005" , "Liege")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "CAN01" , "Edmonton")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "CAN04" , "Calgary")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "CAN06" , "Winnipeg")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "CAN09" , "Vancouver")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "CAN16" , "Quebec")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "CAN20" , "Montreal")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "CAN21" , "Ottawa-Gatineau")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "CAN26" , "Toronto")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "CAN29" , "Hamilton")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "CH001" , "Zurich")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "CH002" , "Geneva")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "CH003" , "Basel")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "CL010" , "Valparaiso")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "CL011" , "Santiago")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "CL020" , "Concepcion")------
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "CZ001" , "Prague")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "CZ002" , "Brno")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "CZ003" , "Ostrava")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "DE001" , "Berlin")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "DE002" , "Hamburg")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "DE003" , "Munich")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "DE004" , "Cologne")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "DE005" , "Frankfurt")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "DE006" , "Essen")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "DE007" , "Stuttgart")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "DE008" , "Leipzig")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "DE009" , "Dresden")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "DE010" , "Dortmund")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "DE011" , "Dusseldorf")-------
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "DE012" , "Bremen")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "DE013" , "Hanover")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "DE014" , "Nuremberg")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "DE015" , "Bochum")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "DE027" , "Freiburg im Breisgau")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "DE033" , "Augsburg")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "DE034" , "Bonn")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "DE035" , "Karlsruhe")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "DE040" , "Saarbrucken") ------
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "DE501" , "Duisburg")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "DE502" , "Mannheim")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "DE504" , "Munster") ------
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "DE507" , "Aachen")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "DK001" , "Copenhagen")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "EE001" , "Tallinn")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "ES001" , "Madrid")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "ES002" , "Barcelona")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "ES003" , "Valencia")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "ES004" , "Seville")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "ES005" , "Zaragoza")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "ES006" , "Malaga") -------
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "ES008" , "Palmas")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "ES019" , "Bilbao")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "FI001" , "Helsinki")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "FR001" , "Paris")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "FR003" , "Lyon")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "FR004" , "Toulouse")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "FR006" , "Strasbourg")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "FR007" , "Bordeaux")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "FR008" , "Nantes")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "FR009" , "Lille")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "FR010" , "Montpellier")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "FR011" , "Saint-Etienne")-------
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "FR013" , "Rennes")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "FR026" , "Grenoble")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "FR032" , "Toulon")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "FR203" , "Marseille")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "FR205" , "Nice")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "FR215" , "Rouen")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "GR001" , "Athens")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "GR002" , "Thessalonica")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "HU001" , "Budapest")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "IE001" , "Dublin")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "IT001" , "Rome")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "IT002" , "Milan")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "IT003" , "Naples")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "IT004" , "Turin")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "IT005" , "Palermo")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "IT006" , "Genova")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "IT007" , "Florence")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "IT008" , "Bari")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "IT009" , "Bologna")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "IT010" , "Catania")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "IT011" , "Venice")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP003" , "Sapporo")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP013" , "Sendai")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP015" , "Niigata")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP020" , "Toyama")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP021" , "Nagano")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP023" , "Kanazawa")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP024" , "Utsunomiya")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP025" , "Maebashi")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP026" , "Mito")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP030" , "Tokyo")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP031" , "Kofu")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP034" , "Nagoya")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP036" , "Numazu")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP038" , "Osaka")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP039" , "Shizuoka")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP040" , "Anjo")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP042" , "Yokkaichi")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP046" , "Himeji")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP047" , "Toyohashi")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP048" , "Hamamatsu")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP050" , "Okayama")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP051" , "Kurashiki")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP052" , "Fukuyama")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP053" , "Hiroshima")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP054" , "Takamatsu")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP055" , "Wakayama")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP059" , "Tokushima")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP064" , "Kitakyushu")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP065" , "Matsuyama")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP066" , "Fukuoka")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP067" , "Kochi")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP071" , "Oita")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP074" , "Kumamoto")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP075" , "Nagasaki")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP077" , "Kagoshima")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "JP078" , "Naha")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "KR004" , "Seoul Incheon")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "KR015" , "Cheongju")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "KR018" , "Daejeon")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "KR022" , "Pohang")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "KR025" , "Daegu")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "KR026" , "Jeonju")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "KR029" , "Ulsan")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "KR032" , "Busan")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "KR033" , "Changwon")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "KR035" , "Gwangju")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "MEX01" , "Mexicali")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "MEX02" , "Tijuana")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "MEX05" , "Juarez")------
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "MEX08" , "Hermosillo")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "MEX10" , "Chihuahua")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "MEX16" , "Reynosa")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "MEX19" , "Monterrey")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "MEX20" , "Torreon")---------
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "MEX21" , "Saltillo")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "MEX22" , "Culiacan")--------
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "MEX24" , "Durango")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "MEX28" , "Tampico")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "MEX29" , "San Luis Potosi")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "MEX31" , "Aguascalientes")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "MEX33" , "Benito Juarez")------
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "MEX34" , "Leon")------
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "MEX35" , "Merida")-------
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "MEX37" , "Guadalajara")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "MEX38" , "Irapuato")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "MEX40" , "Queretaro")------
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "MEX42" , "Celaya")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "MEX46" , "Pachuca de Soto")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "MEX50" , "Morelia")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "MEX51" , "Mexico City")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "MEX52" , "Xalapa")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "MEX55" , "Toluca")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "MEX59" , "Veracruz")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "MEX60" , "Puebla")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "MEX61" , "Cuernavaca")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "MEX70" , "Centro")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "MEX73" , "Oaxaca de Juarez")-----
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "MEX74" , "Acapulco de Juarez")------
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "MEX75" , "Tuxtla Gutierrez")--------
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "NL001" , "The Hague")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "NL002" , "Amsterdam")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "NL003" , "Rotterdam")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "NL004" , "Utrecht")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "NL005" , "Eindjoven")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "NO001" , "Oslo")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "PL001" , "Warsaw")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "PL002" , "Lodz")-------------
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "PL003" , "Krakow")-------
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "PL004" , "Wroclaw")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "PL005" , "Poznan")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "PL006" , "Gdansk")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "PL009" , "Lublin")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "PL010" , "Katowice")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "PT001" , "Lisbon")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "PT002" , "Porto")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "SE001" , "Stockholm")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "SE002" , "Gothenburg")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "SE003" , "Malmo")------
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "SI001" , "Ljubljana")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "SK001" , "Bratislava")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "UK001" , "London")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "UK002" , "Birmingham")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "UK003" , "Leeds")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "UK004" , "Bradford")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "UK005" , "Liverpool")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "UK006" , "Manchester")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "UK007" , "Cardiff")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "UK008" , "Sheffield")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "UK009" , "Bristol")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "UK010" , "Newcastle")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "UK011" , "Leicester")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "UK017" , "Portsmouth")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "UK023" , "Nottingham")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "UK097" , "Galsgow")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "UK098" , "Edinburgh")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US003" , "Seattle")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US012" , "Portland")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US014" , "Minneapolis")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US033" , "Milwaukee")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US035" , "Madison")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US038" , "Buffalo")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US039" , "Grand Rapids")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US044" , "Albany")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US045" , "Detroit")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US048" , "Boston")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US055" , "Chicago")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US060" , "Providence")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US065" , "Toledo")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US069" , "Cleveland")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US070" , "Des Moines")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US077" , "Omaha")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US081" , "Akron")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US084" , "New York")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US089" , "Salt Lake City")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US097" , "Pittsburgh")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US103" , "Harrisburg")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US106" , "Philadelphia")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US107" , "Columbus")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US114" , "Denver")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US115" , "Indianapolis")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US117" , "Dayton")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US122" , "Baltimore")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US124" , "Cincinnati")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US125" , "Washington")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US128" , "Kansas City")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US133" , "Colorado Springs")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US134" , "Saint Louis")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US135" , "Sacramento/Roseville")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US141" , "Louisville")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US146" , "San Francisco")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US147" , "Wichita")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US149" , "Richmond")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US154" , "Norfolk-Portsmouth-Chesapeake-Virginia beach")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US155" , "Fresno")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US159" , "Las Vegas")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US160" , "Nashville")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US161" , "Tulsa")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US170" , "Raleigh")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US174" , "Oklahoma city")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US178" , "Charlotte")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US180" , "Albuquerque")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US181" , "Memphis")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US186" , "Little Rock")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US190" , "Los Angeles")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US195" , "Columbia")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US196" , "Atlanta")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US202" , "Phoenix")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US205" , "Birmingham")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US209" , "Dallas")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US210" , "San Diego")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US212" , "Fort Worth")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US213" , "Charleston")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US223" , "Tucson")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US227" , "El Paso")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US233" , "Baton Rouge")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US234" , "Austin")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US237" , "Jacksonville")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US241" , "New Orleans")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US242" , "Houston")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US245" , "San Antonio")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US250" , "Orlando")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US251" , "Clearwater/Saint Petersburg")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US252" , "Tampa")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US259" , "Miami")
oecd$METRO_ID <- replace(oecd$METRO_ID , oecd$METRO_ID == "US261" , "Mcallen")



```

