# Download GitHub users with more than 100 followers for different locations

```{r}
library(httr)
library(plyr)
library(rjson)

# Create locations vector
locations <- c('Vienna', 'Graz', 'Linz', 'Brussels', 'Antwerp', 'Ghent', 'Liege', 'Edmonton', 'Calgary', 'Winnipeg', 'Vancouver', 'Quebec', 'Montreal', 'Ottawa-Gatineau', 'Toronto', 'Hamilton', 'Zurich', 'Geneva', 'Basel', 'Valparaiso', 'Santiago', 'Concepcion', 'Prague', 'Brno', 'Ostrava', 'Berlin', 'Hamburg', 'Munich', 'Cologne', 'Frankfurt', 'Essen', 'Stuttgart', 'Leipzig', 'Dresden', 'Dortmund', 'Dusseldorf', 'Bremen', 'Hanover', 'Nuremberg', 'Bochum', 'Freiburg im Breisgau', 'Augsburg', 'Bonn', 'Karlsruhe', 'Saarbrucken', 'Duisburg', 'Mannheim', 'Munster', 'Aachen', 'Copenhagen', 'Tallinn', 'Madrid', 'Barcelona', 'Valencia', 'Seville', 'Zaragoza', 'Malaga', 'Palmas', 'Bilbao', 'Helsinki', 'Paris', 'Lyon', 'Toulouse', 'Strasbourg', 'Bordeaux', 'Nantes', 'Lille', 'Montpellier', 'Saint-Etienne', 'Rennes', 'Grenoble', 'Toulon', 'Marseille', 'Nice', 'Rouen', 'Athens', 'Thessalonica', 'Budapest', 'Dublin', 'Rome', 'Milan', 'Naples', 'Turin', 'Palermo', 'Genova', 'Florence', 'Bari', 'Bologna', 'Catania', 'Venice', 'Sapporo', 'Sendai', 'Niigata', 'Toyama', 'Nagano', 'Kanazawa', 'Utsunomiya', 'Maebashi', 'Mito', 'Tokyo', 'Kofu', 'Nagoya', 'Numazu', 'Osaka', 'Shizuoka', 'Anjo', 'Yokkaichi', 'Himeji', 'Toyohashi', 'Hamamatsu', 'Okayama', 'Kurashiki', 'Fukuyama', 'Hiroshima', 'Takamatsu', 'Wakayama', 'Tokushima', 'Kitakyushu', 'Matsuyama', 'Fukuoka', 'Kochi', 'Oita', 'Kumamoto', 'Nagasaki', 'Kagoshima', 'Naha', 'Seoul Incheon', 'Cheongju', 'Daejeon', 'Pohang', 'Daegu', 'Jeonju', 'Ulsan', 'Busan', 'Changwon', 'Gwangju', 'Mexicali', 'Tijuana', 'Juarez', 'Hermosillo', 'Chihuahua', 'Reynosa', 'Monterrey', 'Torreon', 'Saltillo', 'Culiacan', 'Durango', 'Tampico', 'San Luis Potosi', 'Aguascalientes', 'Benito Juarez', 'Leon', 'Merida', 'Guadalajara', 'Irapuato', 'Queretaro', 'Celaya', 'Pachuca de Soto', 'Morelia', 'Mexico City', 'Xalapa', 'Toluca', 'Veracruz', 'Puebla', 'Cuernavaca', 'Centro', 'Oaxaca de Juarez', 'Acapulco de Juarez', 'Tuxtla Gutierrez', 'The Hague', 'Amsterdam', 'Rotterdam', 'Utrecht', 'Eindjoven', 'Oslo', 'Warsaw', 'Lodz', 'Krakow', 'Wroclaw', 'Poznan', 'Gdansk', 'Lublin', 'Katowice', 'Lisbon', 'Porto', 'Stockholm', 'Gothenburg', 'Malmo', 'Ljubljana', 'Bratislava', 'London', 'Birmingham', 'Leeds', 'Bradford', 'Liverpool', 'Manchester', 'Cardiff', 'Sheffield', 'Bristol', 'Newcastle', 'Leicester', 'Portsmouth', 'Nottingham', 'Glasgow', 'Edinburgh', 'Seattle', 'Portland', 'Minneapolis', 'Milwaukee', 'Madison', 'Buffalo', 'Grand Rapids', 'Albany', 'Detroit', 'Boston', 'Chicago', 'Providence', 'Toledo', 'Cleveland', 'Des Moines', 'Omaha', 'Akron', 'New York', 'Salt Lake City', 'Pittsburgh', 'Harrisburg', 'Philadelphia', 'Columbus', 'Denver', 'Indianapolis', 'Dayton', 'Baltimore', 'Cincinnati', 'Washington', 'Kansas City', 'Colorado Springs', 'Saint Louis', 'Sacramento/Roseville', 'Louisville', 'San Fransisco', 'Wichita', 'Richmond', 'Norfolk-Portsmouth-Chesapeake-Virginia beach', 'Fresno', 'Las Vegas', 'Nashville', 'Tulsa', 'Raleigh', 'Oklahoma city', 'Charlotte', 'Albuquerque', 'Memphis', 'Little Rock', 'Los Angeles', 'Columbia', 'Atlanta', 'Phoenix', 'Birmingham', 'Dallas', 'San Diego', 'Fort Worth', 'Charleston', 'Tucson', 'El Paso', 'Baton Rouge', 'Austin', 'Jacksonville', 'New Orleans', 'Houston', 'San Antonio', 'Orlando', 'Clearwater/Saint Petersburg', 'Tampa', 'Miami', 'Mcallen')

# Create empty vector for user counts
user_counts <- vector()

# Loop through the locations and download the user counts
## Note: the %23E turns into a greater than sign >
for (i in locations){
    # Download raw data
    URL_temp <- paste0('https://api.github.com/search/users?q=location:', i,
                      '+followers:%3E100')
    users <- GET(URL_temp) %>% 
                content(as = 'text') %>% 
                fromJSON()               
    
    # Extract counts of users that meet criteria for the location
    user_counts_temp <- users$total_count
    
    # Add to user_counts vector
    user_counts <- c(user_counts, user_counts_temp)
    
    # Sleep R for 5 seconds so you don't overload the API
    Sys.sleep(5); message('-')
}

# Combine locations and user counts data
location_counts <- data.frame(locations, user_counts)
```
